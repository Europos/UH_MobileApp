<ion-header>
  <ion-navbar>
    <ion-row text-center>
        <ion-col col-3 col-lg-3 col-xl-3><button ion-button color="dark" outline (click)="dismiss()">Close</button></ion-col>
        <ion-col col-6 col-lg-6 col-xl-6><ion-title>Add Part</ion-title></ion-col>
        <ion-col col-3 col-lg-3 col-xl-3><button ion-button color="materialGreen" (click)="savePart(newPart.value)" [disabled]="!newPart.valid">Save</button></ion-col>
    </ion-row>
  </ion-navbar>
</ion-header>

<ion-content padding>
    <form [formGroup]="newPart">
      <ion-item>
        <ion-label stacked>Part</ion-label>
        <ion-select [formControl]="newPart.controls['part']" (ionChange)="onPartChange()">
          <ion-option *ngFor="let part of parts" [value]="part.id">{{part.name}}, {{ part.quantity }}pcs</ion-option>
        </ion-select>
      </ion-item>
      <ion-item>
        <ion-label stacked><span style="color: red;">*</span>Quantity {{ maxQuantity }}</ion-label>
        <ion-input type="number" [formControl]="newPart.controls['quantity']" clearInput="true" min="1" [max]="maxQuantity"></ion-input>
      </ion-item>
      <ion-item *ngFor="let part of parts">
        <p *ngIf="newPart.controls['part']['id'] === part.id"><span style="color: red;">*</span>Part q</p>
        <h2>{{ part.quantity }}&nbsp;</h2>
      </ion-item>
      <!-- <ion-item *ngIf="newPart.controls['quantity'].hasError('required') && newPart.controls['quantity'].touched">
        <div>This is a required field</div>
      </ion-item> -->
      <!-- <ion-item> -->
        <!-- <ion-label stacked><span style="color: red;">*</span>Department</ion-label> -->
        <!-- <ion-select multiple="false" [formControl]="newPart.controls['department']" [(ngModel)]="newPart.department"> -->
          <!-- <ion-option *ngFor="let department of departments" [value]="department.Id">{{department.Name}}</ion-option> -->
          <!-- <ion-option value="department.Id">{{department.Name}}</ion-option> -->
        <!-- </ion-select> -->
      <!-- </ion-item> -->
      <ion-item>
        <p><span style="color: red;">*</span>Department</p>
        <h2>{{ department.Name }}&nbsp;</h2>
      </ion-item>
      <ion-item>
        <ion-label stacked>Cost</ion-label>
        <ion-input type="number" [formControl]="newPart.controls['cost']" clearInput="true"></ion-input>
      </ion-item>
    </form>
</ion-content>